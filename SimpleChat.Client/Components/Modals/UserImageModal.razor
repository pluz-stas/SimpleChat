<div class="modal-background-highest" role="dialog" aria-modal="true">
    <div class="d-flex flex-row w-100 carousel-img my-5">
        <div class="carousel-img-control control d-flex align-items-center justify-content-center @(currentPage == default ? "disabled" : null)" @onclick="(() => currentPage--)">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </div>
        <div class="d-flex w-100 flex-column">
            <div id="pot-avatar-container" class="d-flex flex-wrap h-100 w-100">
                @if (!pageSizeCalculated)
                {
                    <img class="profile-pot-pic selected" src="@UserStorage.UserPic" alt="Current avatar" />
                }
                else
                {
                    var alreadyDisplayed = currentPage * imagesCountPerPage;
                    for (int i = alreadyDisplayed; (i < (alreadyDisplayed + imagesCountPerPage)) && (i < avatars.Count); i++)
                    {
                        var path = avatars[i]; // prevent closure
                        var isCurrentAvatar = path == UserStorage.UserPic;
                        <img class="profile-pot-pic @(isCurrentAvatar ? "selected" : null)" @onclick="(() => SelectAvatar(path))" src="@path" alt="@(isCurrentAvatar ? "Current avatar" : "Potential avatar")" />
                    }
                }
            </div>
            <div class="d-flex justify-content-center align-content-center mt-2">
                @for (int i = 0; i <= pages; i++)
                {
                    var index = i; // prevent closure
                    <button class="control @(i == currentPage ? "selected" : null)" type="button" @onclick="(() => currentPage = index)"></button>
                }
            </div>
        </div>
        <div class="carousel-img-control control d-flex align-items-center justify-content-center @(currentPage == pages ? "disabled" : null)" @onclick="(() => currentPage++)">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </div>
    </div>

    <button type="button" class="close control" aria-label="Close" @onclick="OnImageModalClose">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
